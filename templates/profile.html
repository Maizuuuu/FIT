{% extends "base.html" %}

{% block content %}
<div class="user-profile">
  <!-- Ğ›ĞµĞ²Ğ°Ñ Ñ‡Ğ°ÑÑ‚ÑŒ Ñ Ğ¾Ğ¿Ñ€Ğ¾ÑĞ°Ğ¼Ğ¸ -->
  <div class="surveys-section">
    <!-- ĞšĞ½Ğ¾Ğ¿ĞºĞ¸ Ñ†ĞµĞ»ĞµĞ¹ -->
    <div class="profile-goal-buttons">
      <a href="/survey/weight-loss" class="goal-btn" style="background: var(--accent1); color: white;">ğŸ”¥ ĞŸĞ¾Ñ…ÑƒĞ´ĞµÑ‚ÑŒ</a>
      <a href="/survey/muscle-gain" class="goal-btn" style="background: var(--accent2); color: white;">ğŸ’ª ĞĞ°Ğ±Ñ€Ğ°Ñ‚ÑŒ Ğ¼Ğ°ÑÑÑƒ</a>
      <a href="/survey/fitness" class="goal-btn" style="background: var(--accent3); color: var(--dark);">ğŸ”„ ĞŸĞ¾Ğ´Ğ´ĞµÑ€Ğ¶Ğ°Ñ‚ÑŒ Ñ„Ğ¾Ñ€Ğ¼Ñƒ</a>
    </div>

    <!-- ĞšĞ°Ñ€Ñ‚Ğ¾Ñ‡ĞºĞ¸ Ğ¾Ğ¿Ñ€Ğ¾ÑĞ¾Ğ² -->
    <div class="surveys-container">
      {% for survey in current_user.surveys %}
      <div class="survey-card">
        <a href="{{ url_for('view_survey_result', survey_id=survey.id) }}" class="survey-link">
          <div class="survey-header">
            <span class="survey-type" style="color: {% if survey.survey_type == 'weight-loss' %}var(--accent1){% elif survey.survey_type == 'muscle-gain' %}var(--accent2){% else %}var(--accent3){% endif %}">
              {{ "ğŸ”¥ ĞŸĞ¾Ñ…ÑƒĞ´ĞµĞ½Ğ¸Ğµ" if survey.survey_type == 'weight-loss' }}
              {{ "ğŸ’ª ĞœĞ°ÑÑĞ°" if survey.survey_type == 'muscle-gain' }}
              {{ "ğŸ”„ Ğ¤Ğ¾Ñ€Ğ¼Ğ°" if survey.survey_type == 'fitness' }}
            </span>
            <h3 class="survey-title">{{ survey.title }}</h3>
          </div>
          <div class="survey-footer">
            <time>Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ½Ğ¾: {{ survey.created_at.strftime('%d.%m.%Y %H:%M') }}</time>
          </div>
        </a>
        
        <form method="POST" action="{{ url_for('delete_survey', survey_id=survey.id) }}" class="delete-form">
          <button type="submit" class="delete-btn">ğŸ—‘ï¸ Ğ£Ğ´Ğ°Ğ»Ğ¸Ñ‚ÑŒ</button>
        </form>
      </div>
      {% else %}
      <div class="no-surveys">
        <p>Ğ£ Ğ²Ğ°Ñ Ğ¿Ğ¾ĞºĞ° Ğ½ĞµÑ‚ ÑĞ¾Ñ…Ñ€Ğ°Ğ½ĞµĞ½Ğ½Ñ‹Ñ… Ğ¿Ğ»Ğ°Ğ½Ğ¾Ğ²</p>
      </div>
      {% endfor %}
    </div>
  </div>

  <!-- ĞŸÑ€Ğ°Ğ²Ğ°Ñ Ñ‡Ğ°ÑÑ‚ÑŒ Ñ Ğ¿Ñ€Ğ¾Ñ„Ğ¸Ğ»ĞµĞ¼ -->
  <div class="user-info-card">
    <div class="avatar-placeholder"></div>
    <h2 class="username">{{ current_user.username }}</h2>
    <div class="registration-date">
      <span>Ğ”Ğ°Ñ‚Ğ° Ñ€ĞµĞ³Ğ¸ÑÑ‚Ñ€Ğ°Ñ†Ğ¸Ğ¸:</span>
      <time>{{ current_user.created_at.strftime('%d.%m.%Y') }}</time>
    </div>
  </div>
</div>
{% endblock %}